# 更新日志

> 此文件记录了该软件包所有重要的变更
> 文件格式基于 [Keep a Changelog](http://keepachangelog.com/en/1.0.0/) 更新日志规范，且此项目版本号遵循 [语义化版本](http://semver.org/spec/v2.0.0.html) 规范

## [5.3.2] - 2026-1-28
### 更改
- `SerialPort` 修复了未能正确打开串口时无对应日志输出，并在关闭时仍会正常提示串口关闭消息的BUG
- `SerialPort` 中暴露串口配置文件文件夹路径配置字段，可以自由地设置配置文件路径
- `SerialPort` 修复了将有效数据长度(`validDataLength`)设为<=0的值时，会被覆盖初始值导致不同长度的数据包传入时出现问题
- `SerialPort` 修复了接收字符串数据时，因赋值部分错误导致的bug，优化了编辑器内调试数据显示

## [5.3.0] - 2025-10-24
### 新增
- 添加了 DEMO 场景作为使用参考

### 更改
- 对检验码生成功能进行整理与测试，现在生成结果为包含检验位的完整待发送数据

## [5.2.0] - 2025-10-14
### 新增
- 为串口模块添加检验码生成功能，通过 `SerialPort.Send(byte[], CheckCodeType, int)` 方法调用

## [5.1.0] - 2025-09-20
### 更改
- 将串口插件的根目录移动到 `Plugins/DreemurrStudio/SerialPort`

### 修复
- 修复了16位数据接收中存在的错误（奇数长度处理错误和有效长度未正确应用）

## [5.0.0] - 2025-07-04
### 新增
- 添加了新的 `SerialPortController` 脚本作为 `SerialPort` 的升级版，增加了数据包解析、拼接功能
- 为 `SerialPortController` 预留了数据包校验的接口和方法
- 为新功能添加了对应的预制体与 JSON 数据

### 更改
- 优化了大量代码注释和编辑器内的调试体验
- 隐藏了 JSON 配置中部分内部使用的字段（如有效数据配置、缓存长度）

### 已知问题
- `SerialPortController` 中的 ASCII 码通信功能未经测试

## [4.1.0] - 2025-05-23
### 新增
- 添加了 `GetInstance()` 的无参数重载，方便单串口项目快速调用

### 更改
- 对用于编辑器内观察的变量（`receiveDataShow` 与 `validDataShow`）添加了文本格式化，并使用预编译条件使其仅在编辑器模式下运行，以优化性能
- 修改 `Send(byte)` 方法，使其仅发送长度为1的16位数组，以避免数据冗余

## [4.0.0] - 2025-05-22
### 更改
- 为串口脚本添加了静态方法与变量，以便于全局实例化和跨场景调用
- 将核心串口脚本和预制体更名为 `SerialPort`

### 修复
- 修正了串口未打开时的判断逻辑和异常抛出

## [3.1.0] - 2025-05-10
### 更改
- 将串口配置文件路径统一移动到 `StreamingAssets/Configs/ComConfigs`
- 将接收字节数组的缓冲长度从 64 调整为 32
- 预制体名称同步更名为 `SerialPort`

### 修复
- 修复了 `LoadPortInfo` 方法因被错误地放在 `#if UNITY_EDITOR` 作用域中而导致的构建失败问题

## [3.0.0] - 2025-04-21
### 新增
- 使用 Odin Inspector 优化了配置存读和调试界面
- 支持多个实例端口的配置存读和独立运行监听
- 支持截取有效数据位和事件匹配数据位

### 修复
- 修复了字符串比对时未忽略大小写以及字节数组转字符串无效的 BUG

## [2.0.0] - 2025-04-09
### 新增
- 串口管理器添加了事件转换功能，可将接收到的数据自动比对键值并转换为 Unity 事件
- 比对字典可存储为外部 JSON 文件，以便在打包后修改

### 修复
- 修复了打开配置文件功能无效的 BUG

## [1.1.0] - 2025-04-08
### 新增
- 为端口脚本添加了接收测试功能

### 更改
- 略微修改了对象的文件层级结构

## [1.0.0] - 2025-03-20
### 新增
- 初始版本发布，实现了在 Unity 内进行串流端口通信
- 支持通过 `SerialPort.GetInstance()` 获取实例
- 支持通过 `.Send()` 方法发送数据
- 支持在 Inspector 面板中配置端口数据并保存到 JSON 文件
- 支持通过事件监听接收到的数据
- 配置文件位于 `StreamingAsset/Configs/ComConfigs`，支持外部修改
